[gd_scene load_steps=7 format=3 uid="uid://ywgaelhpgpby"]

[ext_resource type="Script" path="res://GameManagement/game.gd" id="1_bo2r8"]
[ext_resource type="Script" path="res://unit/groups.gd" id="1_n6ffw"]
[ext_resource type="Script" path="res://ui/camera.gd" id="2_fdhqp"]
[ext_resource type="PackedScene" uid="uid://bffwtwiaeqg1" path="res://ui/ui.tscn" id="4_twutv"]

[sub_resource type="GDScript" id="GDScript_3igke"]
script/source = "extends Node


func _ready():
	await get_tree().process_frame
	print(\"Group count: %d\" % get_parent().get_node(\"World/Groups\").get_child_count())
	await get_tree().process_frame
	var allUnits = get_tree().get_nodes_in_group(&\"unit\")
	print(\"Unit count: %d\" % allUnits.size())


"

[sub_resource type="NavigationPolygon" id="NavigationPolygon_n13jf"]
vertices = PackedVector2Array(349, -210, 181, -160, -1075, -269, -1243, -352, -3003, -2380, 2438, -2374, 501, -88, 2468, 2443, 476, 133, -2957, 2382, 224, 138, 100, -4, -1130, 680, -1310, 371, -1386, 261, -1320, 73, -1235, -93, 225, -51, -1209, 370, -1503, -168, -1734, 123, -1684, 439, -1521, 544, -1398, 648, -1129, 511)
polygons = Array[PackedInt32Array]([PackedInt32Array(0, 1, 2, 3, 4, 5), PackedInt32Array(6, 5, 7, 8), PackedInt32Array(8, 7, 9, 10), PackedInt32Array(11, 10, 9, 12), PackedInt32Array(13, 14, 15, 16, 2, 1, 17, 11, 18), PackedInt32Array(5, 6, 0), PackedInt32Array(4, 3, 19), PackedInt32Array(4, 19, 20), PackedInt32Array(9, 4, 20, 21), PackedInt32Array(9, 21, 22, 23), PackedInt32Array(24, 18, 11), PackedInt32Array(12, 24, 11), PackedInt32Array(9, 23, 12)])
outlines = Array[PackedVector2Array]([PackedVector2Array(-3034, -2411, -2987, 2412, 2499, 2474, 2468, -2404)])
source_geometry_group_name = &"navigation_polygon_source_group"
cell_size = 10.0
agent_radius = 30.0

[node name="Node2D" type="Node2D"]

[node name="Test" type="Node" parent="."]
script = SubResource("GDScript_3igke")

[node name="NavigationRegion2D" type="NavigationRegion2D" parent="."]
position = Vector2(43, -106)
navigation_polygon = SubResource("NavigationPolygon_n13jf")

[node name="StaticBody2D" type="StaticBody2D" parent="NavigationRegion2D"]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="NavigationRegion2D/StaticBody2D"]
polygon = PackedVector2Array(237, 108, 449, 104, 469, -75, 342, -177, 221, -141, 265, -35, 151, 9)

[node name="CollisionPolygon2D2" type="CollisionPolygon2D" parent="NavigationRegion2D/StaticBody2D"]
polygon = PackedVector2Array(-1240, -317, -1482, -146, -1702, 131, -1656, 421, -1502, 521, -1386, 619, -1160, 646, -1159, 519, -1226, 400, -1326, 402, -1420, 267, -1347, 59, -1262, -109, -1124, -260)

[node name="Game" type="Node2D" parent="."]
script = ExtResource("1_bo2r8")

[node name="World" type="Node2D" parent="."]

[node name="Groups" type="Node2D" parent="World"]
script = ExtResource("1_n6ffw")

[node name="Camera2D" type="Camera2D" parent="World"]
script = ExtResource("2_fdhqp")

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="UI" parent="CanvasLayer" instance=ExtResource("4_twutv")]

[connection signal="player_changed" from="Game" to="World/Groups" method="_on_game_player_changed"]
