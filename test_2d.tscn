[gd_scene load_steps=7 format=3 uid="uid://ywgaelhpgpby"]

[ext_resource type="Script" path="res://GameManagement/game.gd" id="1_bo2r8"]
[ext_resource type="Script" path="res://unit/groups.gd" id="1_n6ffw"]
[ext_resource type="Script" path="res://ui/camera.gd" id="2_fdhqp"]
[ext_resource type="PackedScene" uid="uid://bffwtwiaeqg1" path="res://ui/ui.tscn" id="4_twutv"]

[sub_resource type="GDScript" id="GDScript_3igke"]
script/source = "extends Node


func _ready():
	await get_tree().process_frame
	print(\"Group count: %d\" % get_parent().get_node(\"World/Groups\").get_child_count())
	await get_tree().process_frame
	var allUnits = get_tree().get_nodes_in_group(&\"unit\")
	print(\"Unit count: %d\" % allUnits.size())


"

[sub_resource type="NavigationPolygon" id="NavigationPolygon_n13jf"]
vertices = PackedVector2Array(-1733, -3104, -295, -3425, 1319, -3091, 349, -210, 181, -160, -1075, -269, -1243, -352, -3013, -2388, 476, 133, 501, -88, 2445, -2382, 3321, -1080, 3613, 114, 3405, 1501, 2649, 2513, 1227, 3388, -3858, -1408, -1503, -168, -4102, -20, -1734, 123, -3819, 1462, -3137, 2556, -1684, 439, -1843, 3394, 224, 138, -255, 3543, -1130, 680, -1129, 511, -1521, 544, -1398, 648, -1235, -93, 100, -4, -1209, 370, -1320, 73, 225, -51, -1386, 261, -1310, 371)
polygons = Array[PackedInt32Array]([PackedInt32Array(0, 1, 2, 3, 4, 5, 6, 7), PackedInt32Array(8, 9, 2, 10, 11, 12, 13, 14, 15), PackedInt32Array(2, 9, 3), PackedInt32Array(16, 7, 6, 17, 18), PackedInt32Array(18, 17, 19, 20), PackedInt32Array(21, 20, 19, 22, 23), PackedInt32Array(24, 8, 15, 25, 26, 27), PackedInt32Array(23, 22, 28, 29, 25), PackedInt32Array(25, 29, 26), PackedInt32Array(30, 5, 31, 24, 27, 32, 33), PackedInt32Array(4, 34, 31, 5), PackedInt32Array(35, 33, 32, 36)])
outlines = Array[PackedVector2Array]([PackedVector2Array(-3034, -2411, -3887, -1422, -4133, -23, -3848, 1474, -3159, 2578, -1853, 3424, -255, 3574, 1238, 3418, 2669, 2537, 3434, 1513, 3644, 114, 3349, -1094, 2468, -2404, 1331, -3119, -296, -3456, -1745, -3133)])
source_geometry_group_name = &"navigation_polygon_source_group"
cell_size = 10.0
agent_radius = 30.0

[node name="Node2D" type="Node2D"]

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="UI" parent="CanvasLayer" instance=ExtResource("4_twutv")]

[node name="Test" type="Node" parent="."]
script = SubResource("GDScript_3igke")

[node name="NavigationRegion2D" type="NavigationRegion2D" parent="."]
position = Vector2(43, -106)
navigation_polygon = SubResource("NavigationPolygon_n13jf")

[node name="StaticBody2D" type="StaticBody2D" parent="NavigationRegion2D"]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="NavigationRegion2D/StaticBody2D"]
polygon = PackedVector2Array(237, 108, 449, 104, 469, -75, 342, -177, 221, -141, 265, -35, 151, 9)

[node name="CollisionPolygon2D2" type="CollisionPolygon2D" parent="NavigationRegion2D/StaticBody2D"]
polygon = PackedVector2Array(-1240, -317, -1482, -146, -1702, 131, -1656, 421, -1502, 521, -1386, 619, -1160, 646, -1159, 519, -1226, 400, -1326, 402, -1420, 267, -1347, 59, -1262, -109, -1124, -260)

[node name="Game" type="Node2D" parent="."]
script = ExtResource("1_bo2r8")

[node name="World" type="Node2D" parent="."]
y_sort_enabled = true

[node name="Groups" type="Node2D" parent="World"]
script = ExtResource("1_n6ffw")

[node name="Camera2D" type="Camera2D" parent="World"]
script = ExtResource("2_fdhqp")

[connection signal="player_changed" from="Game" to="World/Groups" method="_on_game_player_changed"]
